<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./static/output.css" rel="stylesheet">
</head>
<body onload="loadItems()" class=" bg-black">
  <custom-header></custom-header>
    <select id="c" class="m-8 w-auto p-4 rounded-xl font-custom3 text-xl opacity-70 hover:opacity-100 transition" onchange="loadItems(c.value)">
      <option value="0">Kategori Seç</option>
      <option value="yuzuk">Yüzük</option>
      <option value="taki">Takı</option>
      <option value="degerliTas">Değerli Taş</option>
    </select>
    <div class="grid grid-cols-4 grid-rows-auto gap-16 m-16 min-h-screen" id="gridy">
    </div>
  <custom-footer></custom-footer>
  <script>
    function loadItems(filter) {
      if (filter === undefined || filter === "0") {
        for (let i=1; i<=parseInt(localStorage.getItem("productCount")); i++) {
          var productBG = document.createElement('div');
          productBG.classList="w-92 h-auto p-4 max-h-96 rounded grid place-items-center bg-black border-4 border-yellow-500 opacity-90"
          productBG.id="productBG"+i
          document.getElementById('gridy').appendChild(productBG)

          var productPicBG=document.createElement("div")
          productPicBG.classList="w-auto h-auto grid place-items-center text-2xl text-white font-custom3 gap-4"
          productPicBG.id="productPicBG"+i
          productPicBG.textContent = localStorage.getItem("product" + i + "name")
          document.getElementById("productBG"+i).appendChild(productPicBG)

          var productPic=document.createElement("img")
          productPic.type = "img"
          productPic.src = localStorage.getItem("product"+i+"pic")
          productPic.classList="w-full h-full border-4 border-yellow-500 rounded-lg hover:scale-110 transition opacity-100"
          productPic.id="productPic"+i
          productPic.addEventListener('click', function(event){
            document.getElementById("productPic" + i).classList.remove("hover:scale-110")
            document.getElementById("productPic" + i).classList.add("w-screen", "h-screen", "absolute", "right-0", "top-0", "border-0", "rounded-none")

            var backBut = document.createElement("button")
            backBut.type = "button"
            backBut.classList="bg-black w-16 h-16 absolute left-16 top-16 text-white font-custom3 rounded-xl text-4xl text-center hover:scale-110 transition"
            backBut.textContent = "<"
            backBut.addEventListener("click", function(event){
              document.getElementById("productPic" + i).classList.remove("w-screen", "h-screen", "absolute", "right-0", "top-0", "border-0", "rounded-none")
              document.getElementById("productPic" + i).classList.add("hover:scale-110")
              backBut.remove()
            })
            document.getElementById("gridy").appendChild(backBut)
            console.log(backBut)
          })
          document.getElementById("productPicBG"+i).appendChild(productPic)
        }
      }
      else {
        document.getElementById("gridy").innerHTML = ""
        loadItems()

        productNums = [];
        for (let i = 1; i<=parseInt(localStorage.getItem("productCount")); i++) {
          if(localStorage.getItem("product"+i+"category") !== filter)
            productNums.push(i)
        }

        for (let i=0; i<productNums.length; i++) {
          document.getElementById("productBG" + productNums[i]).remove()
        }
      }
    }
  </script>
  <script src="./components/header.js"></script>
  <script src="./components/footer.js"></script>
  <script src="./components/product.js"></script>
</body>
</html>
